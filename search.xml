<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>2020 新的开始</title>
    <url>/2020/01/16/2020-%E6%96%B0%E7%9A%84%E5%BC%80%E5%A7%8B/</url>
    <content><![CDATA[<p>也不知道2019年里我改变了多少，依然那么单纯，幻想，焦虑，抑郁，仍然不知道自己现在能不能接受自己，一无是处，一事无成，那有如何呢，都过去了呢，也回不去了呢。</p>
<p>想过2019年曾自己立了无数个flag，现在又实现了几个，对未来还是好迷茫，感受不到光。</p>
<p>人生下来有什么意义呢，活着，死去。时间冲刷后又留下了什么，死后又去了哪里？</p>
<span id="more"></span>

<p>最近一直在做噩梦，梦见自己死去，也不知道自己到底梦见了多少回，等我慢慢地由恐惧变成了适应，我也逐渐开始麻木，这样的梦也消失了</p>
<p>我常常幻想着自己的未来，我的未来是怎样的呢，看着网上的大亨衣食无忧游戏人间，我却只能看到自己未来忙于生计养活自己，我还是没有遇见我心仪的人，一个人潦草度日</p>
<p>我一直不是一个贫困的人，我愧为人</p>
<p>不想平庸，却无能为力</p>
<p>发了那么多牢骚还是带面对现实，唉，晚安世界，或许</p>
<p>永别世界</p>
<p>今天早上又起的很晚，制定好的英语计划没有开始就已经结束，拖延症晚期，唉</p>
<p>去医院做了做检查，中度抑郁，开了半年来士普和百适可，希望能恢复吧</p>
<p>心态崩了</p>
]]></content>
      <categories>
        <category>随笔</category>
      </categories>
  </entry>
  <entry>
    <title>EK - Edmond-Karp</title>
    <url>/2019/11/13/EK-Edmond-Karp/</url>
    <content><![CDATA[<h1 id="EK-Edmond-Karp"><a href="#EK-Edmond-Karp" class="headerlink" title="EK - Edmond-Karp"></a>EK - Edmond-Karp</h1><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// EK(Edmond-Karp) : 利用bfs实现，时间复杂度O（V*E^2）</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cctype&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rg register</span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">1e5</span> + <span class="number">7</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> inf = <span class="number">2147483647</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> _lgl&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> n, m, s, t, tot, head[maxn]; </span><br><span class="line">    <span class="type">bool</span> vis[maxn];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">edge</span>&#123;</span><br><span class="line">        <span class="type">int</span> to, val, next;</span><br><span class="line">    &#125;e[maxn &lt;&lt; <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Pre</span>&#123;</span><br><span class="line">        <span class="type">int</span> point, edge;</span><br><span class="line">    &#125;pre[maxn];</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> z)</span></span>&#123;</span><br><span class="line">        e[++tot].to = y;</span><br><span class="line">        e[tot].next = head[x];</span><br><span class="line">        e[tot].val  = z;</span><br><span class="line">        head[x] = tot;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">rd</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="type">int</span> f = <span class="number">1</span>, s = <span class="number">0</span>; <span class="type">char</span> c = <span class="built_in">getchar</span>();</span><br><span class="line">        <span class="keyword">for</span>(;!<span class="built_in">isdigit</span>(c);c = <span class="built_in">getchar</span>()) <span class="keyword">if</span>(c == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(; <span class="built_in">isdigit</span>(c);c = <span class="built_in">getchar</span>()) s = (s &lt;&lt; <span class="number">3</span>) + (s &lt;&lt; <span class="number">1</span>) + c - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span> f * s;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">bfs</span><span class="params">()</span></span>&#123;</span><br><span class="line">        queue &lt;<span class="type">int</span>&gt; q; </span><br><span class="line">        <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="built_in">sizeof</span>(vis));</span><br><span class="line">        <span class="built_in">memset</span>(pre,<span class="number">-1</span>, <span class="built_in">sizeof</span>(pre));</span><br><span class="line">        vis[s] = <span class="literal">true</span>; q.<span class="built_in">push</span>(s);</span><br><span class="line">        <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">            <span class="type">int</span> now = q.<span class="built_in">front</span>(); q.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = head[now]; i; i = e[i].next)&#123;</span><br><span class="line">                <span class="type">int</span> to = e[i].to;</span><br><span class="line">                <span class="keyword">if</span>(!vis[to] &amp;&amp; e[i].val)&#123;</span><br><span class="line">                    pre[to].point = now;</span><br><span class="line">                    pre[to].edge  = i;</span><br><span class="line">                    <span class="keyword">if</span>(to == t) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                    vis[to] = <span class="number">1</span>;</span><br><span class="line">                    q.<span class="built_in">push</span>(to);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">EK</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(<span class="built_in">bfs</span>())&#123;</span><br><span class="line">            <span class="type">int</span> mi = inf;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = t; i != s; i = pre[i].point) mi = mi &lt; e[pre[i].edge].val ? mi : e[pre[i].edge].val;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = t; i != s; i = pre[i].point)&#123;</span><br><span class="line">                e[pre[i].edge].val -= mi;</span><br><span class="line">                e[pre[i].edge^<span class="number">1</span>].val += mi;</span><br><span class="line">            &#125;</span><br><span class="line">            ans += mi;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">        n = <span class="built_in">rd</span>(), m = <span class="built_in">rd</span>(), s = <span class="built_in">rd</span>(), t = <span class="built_in">rd</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> x, y, z, i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">            x = <span class="built_in">rd</span>(), y = <span class="built_in">rd</span>(), z = <span class="built_in">rd</span>(), <span class="built_in">add</span>(x,y,z), <span class="built_in">add</span>(y,x,<span class="number">0</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,<span class="built_in">EK</span>());</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    _lgl::<span class="built_in">main</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
  </entry>
  <entry>
    <title>洛谷[P3372]线段树模板1</title>
    <url>/2019/11/16/%E6%B4%9B%E8%B0%B7-P3372-%E7%BA%BF%E6%AE%B5%E6%A0%91%E6%A8%A1%E6%9D%BF1/</url>
    <content><![CDATA[<h1 id="【模板】线段树-1"><a href="#【模板】线段树-1" class="headerlink" title="【模板】线段树 1"></a>【模板】线段树 1</h1><h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><p>如题，已知一个数列，你需要进行下面两种操作：</p>
<ol>
<li>将某区间每一个数加上 $k$。</li>
<li>求出某区间每一个数的和。</li>
</ol>
<span id="more"></span>

<h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行包含两个整数 $n, m$，分别表示该数列数字的个数和操作的总个数。</p>
<p>第二行包含 $n$ 个用空格分隔的整数，其中第 $i$ 个数字表示数列第 $i$ 项的初始值。</p>
<p>接下来 $m$ 行每行包含 $3$ 或 $4$ 个整数，表示一个操作，具体如下：</p>
<ol>
<li><code>1 x y k</code>：将区间 $[x, y]$ 内每个数加上 $k$。</li>
<li><code>2 x y</code>：输出区间 $[x, y]$ 内每个数的和。</li>
</ol>
<h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>输出包含若干行整数，即为所有操作 2 的结果。</p>
<h2 id="样例-1"><a href="#样例-1" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1"><a href="#样例输入-1" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">5 5</span><br><span class="line">1 5 4 2 3</span><br><span class="line">2 2 4</span><br><span class="line">1 2 3 2</span><br><span class="line">2 3 4</span><br><span class="line">1 1 5 1</span><br><span class="line">2 1 4</span><br></pre></td></tr></table></figure>

<h3 id="样例输出-1"><a href="#样例输出-1" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">11</span><br><span class="line">8</span><br><span class="line">20</span><br></pre></td></tr></table></figure>

<h2 id="提示"><a href="#提示" class="headerlink" title="提示"></a>提示</h2><p>对于 $30%$ 的数据：$n \le 8$，$m \le 10$。<br>对于 $70%$ 的数据：$n \le {10}^3$，$m \le {10}^4$。<br>对于 $100%$ 的数据：$1 \le n, m \le {10}^5$。</p>
<p>保证任意时刻数列中所有元素的绝对值之和 $\le {10}^{18}$。</p>
<p><strong>【样例解释】</strong></p>
<p><img src="https://cdn.luogu.com.cn/upload/pic/2251.png"></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LL long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lr rt &lt;&lt; 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rr rt &lt;&lt; 1 | 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lson l, m, rt &lt;&lt; 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rson m + 1, r, rt &lt;&lt; 1 | 1</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">1e5</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> N, M, n, m;</span><br><span class="line">LL add[maxn &lt;&lt; <span class="number">2</span>], sum[maxn &lt;&lt; <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> _lgl&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> rt)</span></span>&#123;</span><br><span class="line">        sum[rt] = sum[lr] + sum[rr];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">pushdown</span><span class="params">(<span class="type">int</span> rt,<span class="type">int</span> m)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(add[rt]) &#123;</span><br><span class="line">            add[lr] += add[rt];</span><br><span class="line">            add[rr] += add[rt];</span><br><span class="line">            sum[lr] += add[rt] * (m - (m &gt;&gt; <span class="number">1</span>));</span><br><span class="line">            sum[rr] += add[rt] * (m &gt;&gt; <span class="number">1</span>); </span><br><span class="line">            add[rt] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> l,<span class="type">int</span> r,<span class="type">int</span> rt)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(l == r)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;sum[rt]);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> m = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">build</span>(lson);</span><br><span class="line">        <span class="built_in">build</span>(rson);</span><br><span class="line">        <span class="built_in">pushup</span>(rt);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> L, <span class="type">int</span> R, <span class="type">int</span> c, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> rt)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R) &#123;</span><br><span class="line">            add[rt] += c;</span><br><span class="line">            sum[rt] += (LL) c * (r - l + <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">pushdown</span>(rt, r - l + <span class="number">1</span>);</span><br><span class="line">        <span class="type">int</span> m = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(L &lt;= m) <span class="built_in">update</span>(L, R, c, lson);</span><br><span class="line">        <span class="keyword">if</span>(m &lt; R) <span class="built_in">update</span>(L, R, c, rson);</span><br><span class="line">        <span class="built_in">pushup</span>(rt);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> LL <span class="title">query</span><span class="params">(<span class="type">int</span> L, <span class="type">int</span> R, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> rt)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R) <span class="keyword">return</span> sum[rt];</span><br><span class="line">        <span class="built_in">pushdown</span>(rt, r - l + <span class="number">1</span>);</span><br><span class="line">        LL ret = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> m = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(L &lt;= m) ret += <span class="built_in">query</span>(L, R, lson);</span><br><span class="line">        <span class="keyword">if</span>(m &lt;  R) ret += <span class="built_in">query</span>(L, R, rson);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;N,&amp;M);</span><br><span class="line">        <span class="built_in">build</span>(<span class="number">1</span>, N, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">while</span>(M --)&#123;</span><br><span class="line">            <span class="type">int</span> a, b, c, skt;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;skt);</span><br><span class="line">            <span class="keyword">if</span>(skt == <span class="number">2</span>)&#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;a,&amp;b);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,<span class="built_in">query</span>(a, b, <span class="number">1</span>, N, <span class="number">1</span>));</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">                <span class="built_in">update</span>(a, b, c, <span class="number">1</span>, N, <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    _lgl::<span class="built_in">main</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>Segment Tree</tag>
      </tags>
  </entry>
  <entry>
    <title>洛谷[P3373]线段树模板2</title>
    <url>/2019/11/16/%E6%B4%9B%E8%B0%B7-P3373-%E7%BA%BF%E6%AE%B5%E6%A0%91%E6%A8%A1%E6%9D%BF2/</url>
    <content><![CDATA[<h1 id="【模板】线段树-2"><a href="#【模板】线段树-2" class="headerlink" title="【模板】线段树 2"></a>【模板】线段树 2</h1><h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><p>如题，已知一个数列，你需要进行下面三种操作：</p>
<ul>
<li><p>将某区间每一个数乘上 $x$</p>
</li>
<li><p>将某区间每一个数加上 $x$</p>
</li>
<li><p>求出某区间每一个数的和</p>
</li>
</ul>
<span id="more"></span>

<h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行包含三个整数 $n,m,p$，分别表示该数列数字的个数、操作的总个数和模数。</p>
<p>第二行包含 $n$ 个用空格分隔的整数，其中第 $i$ 个数字表示数列第 $i$ 项的初始值。</p>
<p>接下来 $m$ 行每行包含若干个整数，表示一个操作，具体如下：</p>
<p>操作 $1$： 格式：<code>1 x y k</code>  含义：将区间 $[x,y]$ 内每个数乘上 $k$</p>
<p>操作 $2$： 格式：<code>2 x y k</code>  含义：将区间 $[x,y]$ 内每个数加上 $k$</p>
<p>操作 $3$： 格式：<code>3 x y</code>  含义：输出区间 $[x,y]$ 内每个数的和对 $p$ 取模所得的结果</p>
<h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>输出包含若干行整数，即为所有操作 $3$ 的结果。</p>
<h2 id="样例-1"><a href="#样例-1" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1"><a href="#样例输入-1" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">5 5 38</span><br><span class="line">1 5 4 2 3</span><br><span class="line">2 1 4 1</span><br><span class="line">3 2 5</span><br><span class="line">1 2 4 2</span><br><span class="line">2 3 5 5</span><br><span class="line">3 1 4</span><br></pre></td></tr></table></figure>

<h3 id="样例输出-1"><a href="#样例输出-1" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">17</span><br><span class="line">2</span><br></pre></td></tr></table></figure>

<h2 id="提示"><a href="#提示" class="headerlink" title="提示"></a>提示</h2><p>【数据范围】</p>
<p>对于 $30%$ 的数据：$n \le 8$，$m \le 10$<br>对于 $70%$ 的数据：$n \le 10^3 $，$ m \le 10^4$<br>对于 $100%$ 的数据：$ n \le 10^5$，$ m \le 10^5$</p>
<p>除样例外，$p &#x3D; 571373$</p>
<p>（数据已经过加强^_^）</p>
<p>样例说明：</p>
<p> <img src="https://cdn.luogu.com.cn/upload/pic/2255.png"> </p>
<p>故输出应为 $17$、$2$（ $40 \bmod 38 &#x3D; 2$ ）</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lr rt &lt;&lt; 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rr rt &lt;&lt; 1 | 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lson l, m, rt &lt;&lt; 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rson m + 1, r, rt &lt;&lt; 1 | 1</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">500007</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> _lgl&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> N, M, P, a, b, c;</span><br><span class="line">    LL sum[maxn &lt;&lt; <span class="number">2</span>], add[maxn &lt;&lt; <span class="number">2</span>], mul[maxn &lt;&lt; <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">up</span><span class="params">(<span class="type">int</span> rt)</span></span>&#123;</span><br><span class="line">        sum[rt] = sum[lr] + sum[rr];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">down</span><span class="params">(<span class="type">int</span> rt, <span class="type">int</span> m)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(mul[rt] != <span class="number">1</span>)&#123;</span><br><span class="line">            LL s = mul[rt];</span><br><span class="line"><span class="comment">//            add[rt] = (add[rt] * s) % P;</span></span><br><span class="line">            mul[lr] = (mul[lr] * s) % P;</span><br><span class="line">            mul[rr] = (mul[rr] * s) % P;</span><br><span class="line">            add[lr] = (add[lr] * s) % P;</span><br><span class="line">            add[rr] = (add[rr] * s) % P;</span><br><span class="line">            sum[lr] = (sum[lr] * s) % P;</span><br><span class="line">            sum[rr] = (sum[rr] * s) % P;</span><br><span class="line">            mul[rt] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(add[rt])&#123;</span><br><span class="line">            LL s = add[rt];</span><br><span class="line">            add[lr] = (add[lr] + s) % P;</span><br><span class="line">            add[rr] = (add[rr] + s) % P;</span><br><span class="line">            sum[lr] = (sum[lr] + (add[rt] * (m - (m &gt;&gt; <span class="number">1</span>)))) % P; </span><br><span class="line">            sum[rr] = (sum[rr] + (add[rt] * (m &gt;&gt; <span class="number">1</span>))) % P;</span><br><span class="line">            add[rt] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*inline void down(int rt, int m)&#123;</span></span><br><span class="line"><span class="comment">        if(mul[rt] != 1)&#123;</span></span><br><span class="line"><span class="comment">            add[rt] = add[rt] * mul[rt] % P;</span></span><br><span class="line"><span class="comment">            sum[lr] = sum[lr] * mul[rt] % P;</span></span><br><span class="line"><span class="comment">            sum[rr] *= mul[rt]%P;</span></span><br><span class="line"><span class="comment">            add[lr] *= mul[rt]%P;</span></span><br><span class="line"><span class="comment">            add[rr] *= mul[rt]%P; </span></span><br><span class="line"><span class="comment">            mul[lr] *= mul[rt]%P;</span></span><br><span class="line"><span class="comment">            mul[rr] *= mul[rt]%P;</span></span><br><span class="line"><span class="comment">            mul[rt] = 1;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        if(add[rt])&#123;</span></span><br><span class="line"><span class="comment">            add[lr] += add[rt]%P;</span></span><br><span class="line"><span class="comment">            add[rr] += add[rt]%P;</span></span><br><span class="line"><span class="comment">            sum[lr] += add[rt] * (m - (m &gt;&gt; 1)) % P;</span></span><br><span class="line"><span class="comment">            sum[rr] += add[rt] * (m &gt;&gt; 1) % P;</span></span><br><span class="line"><span class="comment">            add[rt] = 0;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> rt)</span></span>&#123;</span><br><span class="line">        mul[rt] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(l == r)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;sum[rt]);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> m = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">build</span>(lson);</span><br><span class="line">        <span class="built_in">build</span>(rson);</span><br><span class="line">        <span class="built_in">up</span>(rt);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">update_1</span><span class="params">(<span class="type">int</span> L, <span class="type">int</span> R, <span class="type">int</span> c, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> rt)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R) &#123;</span><br><span class="line">            add[rt] = (add[rt] + c) % P;</span><br><span class="line">            sum[rt] = (sum[rt] + (LL) c * (r - l + <span class="number">1</span>))%P;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">down</span>(rt, r - l + <span class="number">1</span>);</span><br><span class="line">        <span class="type">int</span> m = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(L &lt;= m) <span class="built_in">update_1</span>(L, R, c, lson);</span><br><span class="line">        <span class="keyword">if</span>(m &lt;  R) <span class="built_in">update_1</span>(L, R, c, rson);</span><br><span class="line">        <span class="built_in">up</span>(rt);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">update_2</span><span class="params">(<span class="type">int</span> L, <span class="type">int</span> R, <span class="type">int</span> c, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> rt)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R)&#123;</span><br><span class="line">            mul[rt] = (mul[rt] * c) % P;</span><br><span class="line">            add[rt] = (add[rt] * c) % P;</span><br><span class="line">            sum[rt] = (sum[rt] * c) % P;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">down</span>(rt, r - l + <span class="number">1</span>);</span><br><span class="line">        <span class="type">int</span> m = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(L &lt;= m) <span class="built_in">update_2</span>(L, R, c, lson);</span><br><span class="line">        <span class="keyword">if</span>(m  &lt; R) <span class="built_in">update_2</span>(L, R, c, rson);</span><br><span class="line">        <span class="built_in">up</span>(rt);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> LL <span class="title">query</span><span class="params">(<span class="type">int</span> L, <span class="type">int</span> R, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> rt)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R) <span class="keyword">return</span> sum[rt];</span><br><span class="line">        <span class="built_in">down</span>(rt, r - l + <span class="number">1</span>);</span><br><span class="line">        LL ret = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> m = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(L &lt;= m) ret = ret + (<span class="built_in">query</span>(L, R, lson))%P;</span><br><span class="line">        <span class="keyword">if</span>(m &lt;  R) ret = ret + (<span class="built_in">query</span>(L, R, rson))%P;</span><br><span class="line">        <span class="keyword">return</span> ret%P;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="built_in">freopen</span>(<span class="string">&quot;testdata.in.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;N,&amp;M,&amp;P);</span><br><span class="line">        <span class="built_in">build</span>(<span class="number">1</span>, N, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">while</span>(M--)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a);</span><br><span class="line">            <span class="keyword">if</span>(a == <span class="number">2</span>)&#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">                <span class="built_in">update_1</span>(a, b, c, <span class="number">1</span>, N, <span class="number">1</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(a == <span class="number">1</span>)&#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">                <span class="built_in">update_2</span>(a, b, c, <span class="number">1</span>, N, <span class="number">1</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;a,&amp;b);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,<span class="built_in">query</span>(a, b, <span class="number">1</span>, N, <span class="number">1</span>)%P);</span><br><span class="line">            &#125;    </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    _lgl::<span class="built_in">main</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>Segment Tree</tag>
      </tags>
  </entry>
  <entry>
    <title>Kill for life</title>
    <url>/2022/08/31/Kill-for-life/</url>
    <content><![CDATA[<p>演示链接：<br>项目链接：<br>提取码：</p>
]]></content>
      <categories>
        <category>demo</category>
      </categories>
      <tags>
        <tag>Unreal Engine</tag>
      </tags>
  </entry>
</search>
